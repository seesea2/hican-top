{"version":3,"sources":["webpack:///./src/views/ActivitiesTemplates.vue","webpack:///./src/views/ActivitiesTemplates.vue?b937"],"names":["document","title","data","reactive","activities","curActivity","id","group1","group2","catchDelete","filter","item","catchEdit","newAct","i","newCopy","key","push","sort","a","b","Date","startDatetime","Refresh","axios","get","then","resp","catch","err","console","log","length","addActivity","toggleModal","viewActivity","activity","onBeforeMount","loginId","router","__exports__"],"mappings":"87DA2KAA,SAASC,MAAQ,aAEjB,IAAIC,EAAOC,sBAAS,CAClBC,WAAY,GACZC,YAAa,CAAEC,GAAI,IACnBC,OAAQ,MACRC,OAAQ,QAYV,SAASC,EAAYH,GAEnBJ,EAAKE,WAAaF,EAAKE,WAAWM,QAAO,SAACC,GAAD,OAAUA,EAAKL,IAAMA,KAGhE,SAASM,EAAUC,GACjB,GAAIX,EAAKG,YAAYC,IACnB,IAAK,IAAIQ,KAAKZ,EAAKE,WACjB,GAAIF,EAAKE,WAAWU,GAAGR,IAAMO,EAAOP,GAAI,CACtCJ,EAAKE,WAAWU,GAAKD,EACrB,WAGC,CACL,IAAIE,EAAU,GACd,IAAK,IAAIC,KAAOH,EACdE,EAAQC,GAAOH,EAAOG,GAExBd,EAAKE,WAAWa,KAAKF,GAErBb,EAAKE,WAAWc,MAAK,SAAUC,EAAGC,GAChC,OAAO,IAAIC,KAAKD,EAAEE,eAAiB,IAAID,KAAKF,EAAEG,mBAKpD,SAASC,IACPC,IACGC,IAAI,iCACJC,MAAK,SAACC,GAAS,uBACGA,EAAKzB,MADR,IACd,IAAK,EAAL,qBAA4B,KAAnBS,EAAmB,QAC1BT,EAAKE,WAAWa,KAAKN,IAFT,8BAIdT,EAAKE,WAAWc,MAAK,SAAUC,EAAGC,GAChC,OAAO,IAAIC,KAAKD,EAAEE,eAAiB,IAAID,KAAKF,EAAEG,qBAGjDM,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZ3B,EAAKE,WAAW4B,OAAS,KAI/B,SAASC,IACP,IAAK,IAAIjB,KAAOd,EAAKG,YACnBH,EAAKG,YAAYW,GAAO,KAE1Bd,EAAKG,YAAY,QAAU,WAC3ByB,QAAQC,IAAI,eAAgB7B,EAAKG,aACjC6B,eAAY,qBAGd,SAASC,EAAaC,GACpB,IAAK,IAAIpB,KAAOoB,EACdlC,EAAKG,YAAYW,GAAOoB,EAASpB,GAEnCkB,eAAY,wB,OAlEdJ,QAAQC,IAAI,OAAQ7B,EAAKK,QAEzB8B,4BAAc,WACPC,iBAILf,IAHEgB,OAAOtB,KAAK,a,+jJCpLhB,MAAMuB,EAAc,EAEL","file":"js/chunk-2d0ac238.9cda3756.js","sourcesContent":["<template>\r\n  <msi-navbar></msi-navbar>\r\n\r\n  <div class=\"container\">\r\n    <h4 class=\"my-4\">Activity Templates</h4>\r\n\r\n    <div class=\"mt-3\">\r\n      <div>\r\n        <div>\r\n          Group1:\r\n          <div class=\"form-check form-check-inline\">\r\n            <input\r\n              class=\"form-check-input\"\r\n              type=\"radio\"\r\n              v-model=\"data.group1\"\r\n              name=\"group1\"\r\n              id=\"group1_0\"\r\n              value=\"All\"\r\n            />\r\n            <label class=\"form-check-label\" for=\"group1_0\">All</label>\r\n          </div>\r\n          <div class=\"form-check form-check-inline\">\r\n            <input\r\n              class=\"form-check-input\"\r\n              type=\"radio\"\r\n              v-model=\"data.group1\"\r\n              name=\"group1\"\r\n              id=\"group1_1\"\r\n              value=\"Deployment\"\r\n            />\r\n            <label class=\"form-check-label\" for=\"group1_1\">Deployment</label>\r\n          </div>\r\n          <div class=\"form-check form-check-inline\">\r\n            <input\r\n              class=\"form-check-input\"\r\n              type=\"radio\"\r\n              v-model=\"data.group1\"\r\n              name=\"group1\"\r\n              id=\"group1_2\"\r\n              value=\"Non-Deployment\"\r\n            />\r\n            <label class=\"form-check-label\" for=\"group1_2\"\r\n              >Non-Deployment</label\r\n            >\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          Group2:\r\n          <div class=\"form-check form-check-inline\">\r\n            <input\r\n              class=\"form-check-input\"\r\n              type=\"radio\"\r\n              v-model=\"data.group2\"\r\n              name=\"group2\"\r\n              id=\"group2_0\"\r\n              value=\"All\"\r\n            />\r\n            <label class=\"form-check-label\" for=\"group2_0\">All</label>\r\n          </div>\r\n          <div class=\"form-check form-check-inline\">\r\n            <input\r\n              class=\"form-check-input\"\r\n              type=\"radio\"\r\n              v-model=\"data.group2\"\r\n              name=\"group2\"\r\n              id=\"group2_1\"\r\n              value=\"ABT\"\r\n            />\r\n            <label class=\"form-check-label\" for=\"group2_1\">ABT</label>\r\n          </div>\r\n          <div class=\"form-check form-check-inline\">\r\n            <input\r\n              class=\"form-check-input\"\r\n              type=\"radio\"\r\n              v-model=\"data.group2\"\r\n              name=\"group2\"\r\n              id=\"group2_2\"\r\n              value=\"CBT\"\r\n            />\r\n            <label class=\"form-check-label\" for=\"group2_2\">CBT</label>\r\n          </div>\r\n          <div class=\"form-check form-check-inline\">\r\n            <input\r\n              class=\"form-check-input\"\r\n              type=\"radio\"\r\n              v-model=\"data.group2\"\r\n              name=\"group2\"\r\n              id=\"group2_3\"\r\n              value=\"Bus\"\r\n            />\r\n            <label class=\"form-check-label\" for=\"group2_3\">Bus</label>\r\n          </div>\r\n          <div class=\"form-check form-check-inline\">\r\n            <input\r\n              class=\"form-check-input\"\r\n              type=\"radio\"\r\n              v-model=\"data.group2\"\r\n              name=\"group2\"\r\n              id=\"group2_4\"\r\n              value=\"Rail\"\r\n            />\r\n            <label class=\"form-check-label\" for=\"group2_4\">Rail</label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"data.activities.length\" class=\"row\">\r\n      <template v-for=\"activity in data.activities\">\r\n        <div\r\n          v-if=\"\r\n            (data.group1 == 'All' || data.group1 == activity['group1']) &&\r\n            (data.group2 == 'All' || data.group2 == activity['group2'])\r\n          \"\r\n          class=\"col-sm-12 col-md-3 my-1\"\r\n          :key=\"activity.id\"\r\n        >\r\n          <div class=\"card\" role=\"button\" @click=\"viewActivity(activity)\">\r\n            <div class=\"card-header\">{{ activity.title }}</div>\r\n            <div class=\"card-body\">\r\n              <!-- <div class=\"card-title fw-bold\">{{ activity.title }}</div> -->\r\n              <!-- <div class=\"card-text small\">\r\n              <b>Start:</b>\r\n              {{ new Date(activity.startDatetime).toLocaleString() }}\r\n            </div>\r\n            <div class=\"card-text small\">\r\n              <b>End:</b>\r\n              {{ new Date(activity.endDatetime).toLocaleString() }}\r\n            </div> -->\r\n              <div class=\"card-text small\">\r\n                <b>Affected Systems:</b>\r\n                {{ activity.affectedSystems }}\r\n              </div>\r\n              <div class=\"card-text small\">\r\n                <b>Contact Persons:</b>\r\n                {{ activity.contactPersons }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </div>\r\n\r\n    <hr class=\"border-1 my-3\" />\r\n    <div class=\"text-center\">\r\n      <button class=\"btn btn-primary\" @click=\"addActivity()\">\r\n        Create Template\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <activity-details\r\n    :activity=\"data.curActivity\"\r\n    @delete=\"(id) => catchDelete(id)\"\r\n    @edit=\"(newAct) => catchEdit(newAct)\"\r\n  >\r\n  </activity-details>\r\n</template>\r\n\r\n<script setup>\r\nimport axios from \"axios\";\r\nimport { reactive, onBeforeMount } from \"vue\";\r\n\r\nimport msiNavbar from \"../components/MsiNavbar.vue\";\r\nimport activityDetails from \"../components/ActivityDetails.vue\";\r\n\r\nimport { loginId } from \"../common/msiLogin\";\r\nimport toggleModal from \"../common/modal\";\r\nimport router from \"../router\";\r\n\r\ndocument.title = \"Activities\";\r\n\r\nlet data = reactive({\r\n  activities: [],\r\n  curActivity: { id: \"\" },\r\n  group1: \"All\",\r\n  group2: \"All\",\r\n});\r\nconsole.log(\"yc2:\", data.group1);\r\n\r\nonBeforeMount(() => {\r\n  if (!loginId()) {\r\n    router.push(\"/login\");\r\n    return;\r\n  }\r\n  Refresh();\r\n});\r\n\r\nfunction catchDelete(id) {\r\n  // console.log('catchDelete', id)\r\n  data.activities = data.activities.filter((item) => item.id != id);\r\n}\r\n\r\nfunction catchEdit(newAct) {\r\n  if (data.curActivity.id) {\r\n    for (let i in data.activities) {\r\n      if (data.activities[i].id == newAct.id) {\r\n        data.activities[i] = newAct;\r\n        break;\r\n      }\r\n    }\r\n  } else {\r\n    let newCopy = {};\r\n    for (let key in newAct) {\r\n      newCopy[key] = newAct[key];\r\n    }\r\n    data.activities.push(newCopy);\r\n    // data.activities.push(newAct);\r\n    data.activities.sort(function (a, b) {\r\n      return new Date(b.startDatetime) - new Date(a.startDatetime);\r\n    });\r\n  }\r\n}\r\n\r\nfunction Refresh() {\r\n  axios\r\n    .get(\"/api/msi/activities/templates\")\r\n    .then((resp) => {\r\n      for (let item of resp.data) {\r\n        data.activities.push(item);\r\n      }\r\n      data.activities.sort(function (a, b) {\r\n        return new Date(b.startDatetime) - new Date(a.startDatetime);\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      data.activities.length = 0;\r\n    });\r\n}\r\n\r\nfunction addActivity() {\r\n  for (let key in data.curActivity) {\r\n    data.curActivity[key] = null;\r\n  }\r\n  data.curActivity[\"type\"] = \"Template\";\r\n  console.log(\"addActivity:\", data.curActivity);\r\n  toggleModal(\"editActivityModal\");\r\n}\r\n\r\nfunction viewActivity(activity) {\r\n  for (let key in activity) {\r\n    data.curActivity[key] = activity[key];\r\n  }\r\n  toggleModal(\"activityDetailsModal\");\r\n}\r\n</script>\r\n","import script from \"./ActivitiesTemplates.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ActivitiesTemplates.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"sourceRoot":""}