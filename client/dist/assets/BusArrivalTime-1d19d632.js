import{a as N}from"./axios-4a70c6fc.js";import{d as B,r as A,j as S,c as s,b as t,u as n,t as r,f as u,F as b,g as _,o as l,n as g}from"./index-838393e5.js";import{a as h,b as C}from"./busBookmarks-6b02e7eb.js";const x={class:"container text-center py-3"},L={key:0},w={key:1,class:"my-3"},D=t("div",{class:"spinner-border",style:{width:"10rem",height:"10rem"},role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),E=[D],$={key:2},F={key:0,class:"table mt-3"},O=t("thead",{class:"thead-dark"},[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"1st Bus"),t("th",{scope:"col"},"2nd Bus"),t("th",{scope:"col"},"3rd Bus")])],-1),R={key:0},T={scope:"row"},V={key:1},j=t("caption",null,[t("ul",{class:"small"},[t("li",null,[t("label",null,"Seats Available")]),t("li",null,[t("label",{class:"bg-info"},"Standing Available")]),t("li",null,[t("label",{class:"bg-warning"},"Limited Standing")])])],-1),z={class:"btn-group mt-3"},I=B({__name:"BusArrivalTime",setup(M){document.title="Bus Arrival";let o=A({inputCode:"",loading:!1,loadingNote:""}),d,c,p;const k=S();o.value.inputCode=k.params.inputCode[0],f();function f(){o.value.loading=!0,o.value.loadingNote="",N.get("/api/lta/bus/busArrival/"+o.value.inputCode).then(e=>{c.value=e.data.busStop,d.value=e.data.busArrival,p.value=h(o.value.inputCode)}).catch(e=>{if(e.response&&e.response.data&&e.response.data.message){o.value.loadingNote=e.response.data.message;return}o.value.loadingNote=e}).finally(()=>{o.value.loading=!1})}function m(e){if(!(!e||e.Load=="SEA")){if(e.Load=="SDA")return"bg-info";if(e.Load=="LSD")return"bg-warning"}}function v(e){if(!e||!e.EstimatedArrival)return"NA";const i=new Date(e.EstimatedArrival);if(i.valueOf()-Date.now()<0)return"Arrived";const a=(i.valueOf()-Date.now())/1e3/60;return a<1?"1 min":a.toFixed(0)+" mins"}function y(){C(c.value)&&(p.value=h(o.value.inputCode))}return(e,i)=>(l(),s("div",x,[t("div",null,[n(c)?(l(),s("h3",L,r(n(c).Description),1)):u("",!0),t("h5",null,"Bus Stop: "+r(n(o).inputCode),1),n(o).loading?(l(),s("div",w,E)):n(o).loadingNote?(l(),s("div",$,r(n(o).loadingNote),1)):u("",!0)]),n(d)?(l(),s("table",F,[O,n(d).Services.length?(l(),s("tbody",R,[(l(!0),s(b,null,_(n(d).Services,a=>(l(),s("tr",{key:a.ServiceNo},[t("th",T,r(a.ServiceNo),1),t("td",{class:g(m(a.NextBus))},r(v(a.NextBus)),3),t("td",{class:g(m(a.NextBus2))},r(v(a.NextBus2)),3),t("td",{class:g(m(a.NextBus2))},r(v(a.NextBus3)),3)]))),128))])):(l(),s("tbody",V,[t("tr",null,[(l(),s(b,null,_(4,a=>t("td",{key:a},"NA")),64))])])),j])):u("",!0),t("div",z,[n(o).loadingNote?u("",!0):(l(),s("button",{key:0,onClick:i[0]||(i[0]=a=>f()),class:"btn btn-primary"}," Refresh ")),!n(o).loadingNote&&!n(p)?(l(),s("button",{key:1,onClick:i[1]||(i[1]=a=>y()),class:"btn btn-primary"}," BookmarkBusStop ")):u("",!0),t("button",{class:"btn btn-primary",onClick:i[2]||(i[2]=a=>e.$router.go(-1))},"Back")])]))}});export{I as default};
